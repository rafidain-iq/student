<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تسجيل الدخول - إعدادية رافدين</title>
<link rel="stylesheet" href="style.css">
<style>
body {
  font-family: 'Tahoma', sans-serif;
  background: url('https://k.top4top.io/p_3498f7ivx1.png') no-repeat center center fixed;
  background-size: cover;
  margin: 0;
  padding: 0;
}
.login-container {
  background: rgba(255,255,255,0.95);
  padding: 20px;
  margin: 80px auto;
  max-width: 400px;
  border-radius: 8px;
  text-align: center;
}
input, select, button {
  width: 90%;
  padding: 10px;
  margin: 10px 0;
  font-size: 16px;
}
button {
  background: #1976d2;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
button:hover { background: #125ca1; }
.logo { width: 100px; margin-bottom: 15px; }
.red { color: red; font-weight: bold; }
</style>
</head>
<body>

<div class="login-container">
  <img src="https://e.top4top.io/p_34909jjnx0.png" class="logo" alt="شعار المدرسة">
  <h2>تسجيل دخول الطالب</h2>
  <input type="text" id="code" placeholder="أدخل الكود">
  <select id="class">
    <option value="">اختر الصف</option>
    <option>رابع أ</option><option>رابع ب</option><option>رابع ج</option>
    <option>رابع د</option><option>رابع هـ</option><option>رابع و</option>
    <option>خامس أ</option><option>خامس ب</option><option>خامس ج</option>
    <option>خامس د</option><option>خامس هـ</option><option>خامس و</option>
    <option>سادس أ</option><option>سادس ب</option><option>سادس ج</option>
    <option>سادس د</option><option>سادس هـ</option><option>سادس و</option>
  </select>
  <button onclick="login()">دخول</button>
</div>

<script>
const classMap = {
  "رابع أ": "r4_a", "رابع ب": "r4_b", "رابع ج": "r4_c", "رابع د": "r4_d", "رابع هـ": "r4_e", "رابع و": "r4_f",
  "خامس أ": "r5_a", "خامس ب": "r5_b", "خامس ج": "r5_c", "خامس د": "r5_d", "خامس هـ": "r5_e", "خامس و": "r5_f",
  "سادس أ": "r6_a", "سادس ب": "r6_b", "سادس ج": "r6_c", "سادس د": "r6_d", "سادس هـ": "r6_e", "سادس و": "r6_f"
};

function login() {
  const code = document.getElementById("code").value.trim().toUpperCase();
  const studentClass = document.getElementById("class").value;

  if (!code || !studentClass) {
    alert("يرجى إدخال الكود واختيار الصف.");
    return;
  }

  const key = classMap[studentClass];
  if (!key) { alert("الصف غير معروف."); return; }

  const script = document.createElement("script");
  script.src = `student_data_files/data_${key}.js`;
  script.onload = function() {
    if (typeof students === "undefined") { alert("تعذر تحميل بيانات الطلاب."); return; }

    const student = students.find(s => s["الكود"] === code);
    if (!student) {
      alert("الكود غير صحيح أو لا ينتمي للصف المحدد.");
      return;
    }

    localStorage.setItem("studentData", JSON.stringify(student));
    window.location.href = "dashboard.html";
  };
  script.onerror = function() {
    alert("تعذر تحميل بيانات الصف المحدد. تأكد من اختيار الصف الصحيح.");
  };
  document.body.appendChild(script);
}
</script>

</body>
</html>
