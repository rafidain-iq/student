<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة الطالب – إعدادية رافدين</title>

<style>
/* ---------- ستايل أساسي ---------- */
body {
  font-family: 'Tahoma', sans-serif;
  margin: 0;
  background: url('https://k.top4top.io/p_3498f7ivx1.png') no-repeat center center fixed;
  background-size: cover;
  color: #333;
}

header {
  background: linear-gradient(90deg,#54B8C2,#F4BE45);
  color: white;
  padding: 12px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
header .logo-header img { height:50px; }
header button#hamburger {
  font-size: 28px; background: transparent; border: none; color: white; cursor: pointer;
}

/* ---------- القائمة الجانبية ---------- */
.sidebar {
  position: fixed; top: 0; right: -250px; width: 250px; height: 100%;
  background: #fff; padding-top: 60px; box-shadow: -2px 0 5px rgba(0,0,0,0.1);
  transition: right 0.3s; z-index: 999;
}
.sidebar.active { right: 0; }
.sidebar button {
  width:100%; padding:12px; border:none; background:#fff; margin-bottom:5px;
  cursor:pointer; text-align:right; font-size:16px;
}
.sidebar button.active { background: linear-gradient(90deg,#F4BE45,#54B8C2); color:white; }

.main {
  max-width:1100px; margin:20px auto; padding:20px;
  background: rgba(255,255,255,0.95); border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.08);
}
section { margin-bottom:20px; }
.hidden { display:none; }

.student-card { display:flex; gap:14px; align-items:center; margin-bottom:14px; }
.student-info h2 { margin:0 0 6px 0; font-size:20px; }
.student-meta { color:#555; font-size:14px; }
.admin-message { margin:12px 0; padding:12px; background:#fff6e6; border-left:4px solid #F4BE45; border-radius:6px; display:none; }

table { width:100%; border-collapse:collapse; margin-top:10px; }
th, td { border:1px solid #ccc; padding:8px; text-align:center; font-size:14px; }
th { background:#F4BE45; color:white; }
tr:nth-child(even){ background:#f2f2f2; }
td.fail { color:red; font-weight:bold; }

.news-list, .activities-list { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:10px; margin-top:10px; }
.news-card, .activity-card { padding:12px; border-radius:8px; background:#fafafa; border:1px solid #eee; }

body.dark { background:#121212; color:#e0e0e0; }
body.dark .main, body.dark .sidebar { background: rgba(32,32,32,0.86); color:#e9eef1; }
body.dark .news-card, body.dark .activity-card { background: rgba(0,0,0,0.45); border-color: rgba(255,255,255,0.06); }
body.dark .admin-message { background: rgba(255,255,255,0.03); border-left-color: #F4BE45; color:#fff; }

/* ---------- responsive ---------- */
@media (max-width:900px){
  .sidebar{ width:80%; }
}
</style>
</head>
<body>

<header>
  <div class="logo-header"><img src="https://e.top4top.io/p_34909jjnx0.png" alt="لوغو المدرسة"></div>
  <button id="hamburger">☰</button>
</header>

<aside class="sidebar" aria-label="القائمة الجانبية">
  <button id="btn-home" class="active">الرئيسية</button>
  <button id="btn-grades">درجاتي</button>
  <button id="btn-timetable">جدول الأسبوعي</button>
  <button id="btn-activities">جدول النشاطات</button>
  <button id="btn-dark">الوضع المظلم</button>
  <button id="btn-contact">تواصل معنا</button>
</aside>

<main class="main">
  <section id="home-section">
    <div class="student-card">
      <div style="width:82px;height:82px;border-radius:10px;background:#f1f1f1;display:flex;align-items:center;justify-content:center;font-size:28px;color:#777">👩‍🎓</div>
      <div class="student-info">
        <h2 id="student-name">اسم الطالب</h2>
        <div class="student-meta"><span id="student-class">الصف</span> — شعبة <span id="student-section">شعبة</span></div>
      </div>
    </div>
    <div id="admin-msg" class="admin-message"></div>
    <div class="section">
      <h3>الأخبار</h3>
      <div id="news-container" class="news-list"></div>
    </div>
  </section>

  <section id="grades-section" class="hidden section">
    <h3>درجاتي</h3>
    <div id="grades-container"></div>
  </section>

  <section id="timetable-section" class="hidden section">
    <h3>جدول الأسبوعي</h3>
    <div id="timetable-container"></div>
  </section>

  <section id="activities-section" class="hidden section">
    <h3>جدول النشاطات</h3>
    <div id="activities-container" class="activities-list"></div>
  </section>

  <section id="contact-section" class="hidden section">
    <h3>تواصل معنا</h3>
    <p class="light-muted">روابط التواصل قابلة للتعديل من قبل الإدارة (فيسبوك، تيليجرام ...).</p>
    <div style="margin-top:10px"><a id="fb-link" href="#" target="_blank">فيسبوك</a> — <a id="tg-link" href="#" target="_blank">تيليجرام</a></div>
  </section>
</main>

<script>
// -------------------- helpers --------------------
const q = s=>document.querySelector(s);

function showSection(id){
  document.querySelectorAll('.main section').forEach(s=>s.classList.add('hidden'));
  const el = document.getElementById(id); if(el) el.classList.remove('hidden');
  document.querySelectorAll('.sidebar button').forEach(b=>b.classList.remove('active'));
  const map = { 'home-section':'btn-home','grades-section':'btn-grades','timetable-section':'btn-timetable','activities-section':'btn-activities','contact-section':'btn-contact' };
  const btn = document.getElementById(map[id]); if(btn) btn.classList.add('active');
}

// -------------------- بيانات الطالب --------------------
const student = JSON.parse(localStorage.getItem('studentData')||'null');
if(!student){ alert('لم يتم العثور على بيانات الطالب. الرجاء تسجيل الدخول.'); window.location.href='index.html'; }
else{
  q('#student-name').textContent = student['الاسم'];
  q('#student-class').textContent = student['الصف'];
  q('#student-section').textContent = student['الشعبة'];
  if(student['رسالة']) { const m=q('#admin-msg'); m.style.display='block'; m.textContent=student['رسالة']; }
}

// -------------------- درجات --------------------
function renderGrades(grades){
  if(!grades){ q('#grades-container').innerHTML='<p>لا تتوفر بيانات درجات.</p>'; return; }
  let html='<table><thead><tr><th>المادة</th><th>شهر1</th><th>شهر2</th><th>شهر3</th><th>سعي</th><th>نصف السنة</th><th>النهائي</th><th>الإكمال</th></tr></thead><tbody>';
  for(const sub in grades){
    const g=grades[sub];
    html+='<tr>';
    html+=`<td>${sub}</td>`;
    html+=`<td>${g["الشهر الأول"]||'-'}</td>`;
    html+=`<td>${g["الشهر الثاني"]||'-'}</td>`;
    html+=`<td>${g["الشهر الثالث"]||'-'}</td>`;
    html+=`<td>${g["السعي"]||'-'}</td>`;
    html+=`<td>${g["نصف السنة"]||'-'}</td>`;
    html+=`<td>${g["النهائي"]||'-'}</td>`;
    html+=`<td>${g["الإكمال"]||'-'}</td>`;
    html+='</tr>';
  }
  html+='</tbody></table>';
  q('#grades-container').innerHTML=html;
}
renderGrades(student['الدرجات']);

// -------------------- الجدول الأسبوعي --------------------
function renderTimetable(tt){
  if(!tt){ q('#timetable-container').innerHTML='<p>لا يوجد جدول أسبوعي.</p>'; return; }
  let html='<table><thead><tr><th>اليوم</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr></thead><tbody>';
  for(const d in tt){
    const r=tt[d];
    html+='<tr><td>'+d+'</td>';
    for(let i=0;i<6;i++) html+='<td>'+ (r[i]||'-') +'</td>';
    html+='</tr>';
  }
  html+='</tbody></table>';
  q('#timetable-container').innerHTML=html;
}
renderTimetable(student['الجدول']);

// -------------------- الأخبار --------------------
fetch('/student/news.json').then(r=>r.json()).then(list=>{
  const container=q('#news-container'); container.innerHTML='';
  list.sort((a,b)=>new Date(b.date)-new Date(a.date));
  list.slice(0,3).forEach(n=>{
    const div=document.createElement('div'); div.className='news-card';
    div.innerHTML=`<h4>${n.title}</h4><p>${n.description}</p><time>${n.date}</time>`;
    container.appendChild(div);
  });
});

// -------------------- النشاطات --------------------
fetch('/student/ac.json').then(r=>r.json()).then(list=>{
  const container=q('#activities-container'); container.innerHTML='';
  list.forEach(n=>{
    const div=document.createElement('div'); div.className='activity-card';
    div.innerHTML=`<h4>${n.title}</h4><p>${n.description}</p><time>${n.date}</time>`;
    container.appendChild(div);
  });
});

// -------------------- أزرار القائمة --------------------
q('#btn-home').addEventListener('click',()=>showSection('home-section'));
q('#btn-grades').addEventListener('click',()=>showSection('grades-section'));
q('#btn-timetable').addEventListener('click',()=>showSection('timetable-section'));
q('#btn-activities').addEventListener('click',()=>showSection('activities-section'));
q('#btn-contact').addEventListener('click',()=>showSection('contact-section'));

// -------------------- القائمة الثلاث خطوط --------------------
const sidebar=q('.sidebar'); const ham=q('#hamburger');
ham.addEventListener('click',()=>sidebar.classList.toggle('active'));
document.body.addEventListener('click',e=>{ if(!sidebar.contains(e.target)&&!ham.contains(e.target)) sidebar.classList.remove('active'); });

// -------------------- الوضع المظلم --------------------
const darkBtn=q('#btn-dark');
darkBtn.addEventListener('click',()=>{
  document.body.classList.toggle('dark');
  localStorage.setItem('darkMode',document.body.classList.contains('dark')?'1':'0');
});
if(localStorage.getItem('darkMode')==='1') document.body.classList.add('dark');
</script>

</body>
</html>
